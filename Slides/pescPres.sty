\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{pescPres}[2021/06/21 Apresentação do Pesc - versão 2]

\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{beamerthememetropolis}}

\ProcessOptions\relax

\RequirePackage{beamerthememetropolis}

%
\def\pescdesc{Programa de Engenharia de Sistemas e Computação}

%data
\def\brshortdate{\leavevmode\hbox{\twodigits\day/\twodigits\month/\the\year}}
\def\twodigits#1{\ifnum#1<10 0\fi\the#1}

% cores
\definecolor{azul-pesc}{RGB}{0, 52, 90}
\definecolor{ouro-pesc}{RGB}{214, 135, 73}
\definecolor{cinza-1}{RGB}{114, 113, 118}
\definecolor{cinza-2}{RGB}{135, 134, 138}

\setbeamercolor{normal text}{fg=azul-pesc}
\setbeamercolor{rodape pesc}{bg=azul-pesc, fg=ouro-pesc}




% rodapé
\setbeamerfont{page number in head/foot}{size=\LARGE, series=\bfseries}
\setbeamerfont{footline}{size=\footnotesize, series=\bfseries}

\setbeamertemplate{frame footer}[custom]{\insertdate}

\defbeamertemplate{footline}{pesc}{%
\leavevmode%
\begin{beamercolorbox}[wd=\paperwidth, ht=2em, center]{rodape pesc}
\usebeamerfont{footline}
	\begin{minipage}[c]{.18\textwidth}
		\brshortdate\vspace*{.4em}
	\end{minipage}
	\begin{minipage}[c]{.6\textwidth}
		\center\pescdesc\vspace*{.4em}
	\end{minipage}
	\begin{minipage}[c]{.18\textwidth}
		\hfill\usebeamerfont{page number in head/foot}\usebeamertemplate{frame numbering}\vspace*{.5ex}
	\end{minipage}
\end{beamercolorbox}
}


\setbeamertemplate{footline}[pesc]



% cabeçalho
\setbeamercolor{frametitle}{fg=azul-pesc, bg={}}

\setbeamertemplate{logo in head}{
 \tikz[remember picture, overlay] \node[anchor=north west, yshift=.5ex, xshift=-.5ex] at (current page.north west) {\includegraphics[width=.08\paperwidth]{img/pesc.png}};
}

\setbeamerfont{frametitle}{size=\LARGE, series=\bfseries}

\setbeamertemplate{frametitle}{
	\vspace{.7em}\hspace{.7em}
	\insertframetitle
	\usebeamertemplate*{logo in head}
}

%\addtobeamertemplate{frametitle}{}{}

	
% configuração do orientador
\def\advisor@internal{}
\newcommand{\advisor}[1]{\gdef\advisor@internal{#1}}
\newcommand{\insertadvisor}{\advisor@internal}
\defbeamertemplate*{advisor}{plain}{
	\usebeamerfont{author}Orientador: \insertadvisor \par %
	\vspace*{0.25em}
}


%configuração da página de título
\setbeamertemplate{title page}{
	\tikz[remember picture, overlay] \node[anchor=west, yshift=2em] at (current page.west) {\includegraphics[width=.30\paperwidth]{img/pesc.png}};
	\tikz[remember picture, overlay] \node[anchor=north east, yshift=-.5em] (logo ufrj) at (current page.north east) {\includegraphics[width=.18\paperwidth]{img/UFRJ_HorizontalCompleta_Tela_Positivo.png}};
	\tikz[remember picture, overlay] (logo coppe) \node[anchor=east, yshift=.3em] at (logo ufrj.west) {\includegraphics[width=.13\paperwidth]{img/COPPE.eps}};
	\hfill%
	\begin{minipage}[t][\paperheight]{.7\textwidth}
		\ifx\inserttitlegraphic\@empty\else\usebeamertemplate*{title graphic}\fi
		\vfill%
		\ifx\inserttitle\@empty\else\usebeamertemplate*{title}\fi
		\ifx\insertsubtitle\@empty\else\usebeamertemplate*{subtitle}\fi
		\usebeamertemplate*{title separator}
		
		\ifx\beamer@shortauthor\@empty\else\usebeamertemplate*{author}\fi
		\ifx\advisor@internal\@empty\else\usebeamertemplate*{advisor}\fi
		\ifx\insertdate\@empty\else\usebeamertemplate*{date}\fi
		\ifx\insertinstitute\@empty\else\usebeamertemplate*{institute}\fi
		\vfill
		\vspace*{1mm}
	\end{minipage}
	
}
